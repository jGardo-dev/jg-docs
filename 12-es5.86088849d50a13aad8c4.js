!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"3pp/":function(t,i,r){"use strict";r.r(i),r.d(i,"FilePageModule",(function(){return j}));var o=r("TEn/"),a=r("ofXK"),s=r("3Pt+"),c=r("tyNb"),l=r("fXoL");function f(e,t){if(1&e&&(l.Rb(0,"pre"),l.oc(1),l.Qb()),2&e){var n=l.bc();l.Eb(1),l.pc(n.file.content)}}var u,h,v,b=((u=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"setFile",value:function(e){this.file=e}}]),t}()).\u0275fac=function(e){return new(e||u)},u.\u0275cmp=l.Ib({type:u,selectors:[["app-default-file-viewer"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&l.mc(0,f,2,1,"pre",0),2&e&&l.ec("ngIf",t.file)},directives:[a.i],styles:[""]}),u),d=r("Tr1Y"),p=((v=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}},{key:"setFile",value:function(e){this.file=e}}]),t}()).\u0275fac=function(e){return new(e||v)},v.\u0275cmp=l.Ib({type:v,selectors:[["app-markdown-file-viewer"]],decls:1,vars:1,consts:[["name","Content","mode","preview","height","100%",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(l.Rb(0,"md-editor",0),l.Zb("ngModelChange",(function(e){return t.file.content=e})),l.Qb()),2&e&&l.ec("ngModel",t.file.content)},directives:[d.b,s.e,s.f],styles:["md-editor .preview-panel{background-color:initial!important}"]}),v),y=((h=function(){function t(n){e(this,t),this.factoryResolver=n}return n(t,[{key:"addViewer",value:function(e,t){var n=this.resolveComponentType(t),i=this.factoryResolver.resolveComponentFactory(n).create(e.parentInjector),r=i.instance;return r.setFile(t),e.insert(i.hostView),r}},{key:"resolveComponentType",value:function(e){return e.fileSystemEntry.name.endsWith(".md")?p:b}}]),t}()).\u0275fac=function(e){return new(e||h)(l.Vb(l.l))},h.\u0275prov=l.Kb({token:h,factory:h.\u0275fac}),h),m=r("bOdf"),S=r("Cfvw"),w=r("7DJ4"),g=r("YZAu"),k=r("I/6E"),F=["dynamic"];function R(e,t){}var E,O,C,I,P=((E=function(){function t(n,i,r,o,a,s){e(this,t),this.fileViewerProviderService=n,this.route=i,this.fileSystemFacadeCacheService=r,this.toastService=o,this.refresherService=a,this.router=s}return n(t,[{key:"ngAfterViewInit",value:function(){this.currentViever=this.fileViewerProviderService.addViewer(this.viewContainerRef,this.file)}},{key:"ngOnInit",value:function(){var e=this;this.routeDataSubscription=this.route.data.subscribe((function(t){e.file=t.file,e.fileSystemFacade=t.fileSystemFacade,e.currentViever&&e.currentViever.setFile(e.file)}))}},{key:"ngOnDestroy",value:function(){this.routeDataSubscription.unsubscribe()}},{key:"goToItem",value:function(e){var t=e.path.substr(1).split("/");this.router.navigate([this.getFileSystemPrefix()].concat(t))}},{key:"getFileSystemPrefix",value:function(){return"/tabs/home/file-system/"+this.file.fileSystemEntry.dataSource.id}},{key:"doRefresh",value:function(e){var t=this;this.fileSystemFacadeCacheService.refresh(this.fileSystemFacade).pipe(Object(m.a)((function(){var e=(t.file.fileSystemEntry.path+"-details").split("/");return Object(S.a)(t.router.navigate([t.getFileSystemPrefix()].concat(e),{skipLocationChange:!0,state:{refreshTime:new Date}}))})),this.refresherService.finishRefresher(e),this.toastService.catchErrorAndShowToast()).subscribe()}}]),t}()).\u0275fac=function(e){return new(e||E)(l.Ob(y),l.Ob(c.a),l.Ob(w.a),l.Ob(g.a),l.Ob(k.a),l.Ob(c.g))},E.\u0275cmp=l.Ib({type:E,selectors:[["app-file"]],viewQuery:function(e,t){var n;1&e&&l.rc(F,!0,l.U),2&e&&l.gc(n=l.ac())&&(t.viewContainerRef=n.first)},decls:12,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["dynamic",""]],template:function(e,t){1&e&&(l.Rb(0,"ion-header",0),l.Rb(1,"ion-toolbar"),l.Rb(2,"ion-buttons",1),l.Pb(3,"ion-back-button"),l.Qb(),l.Rb(4,"ion-title"),l.Rb(5,"ion-label"),l.oc(6),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(7,"ion-content",2),l.Rb(8,"ion-refresher",3),l.Zb("ionRefresh",(function(e){return t.doRefresh(e)})),l.Pb(9,"ion-refresher-content"),l.Qb(),l.mc(10,R,0,0,"ng-template",null,4,l.nc),l.Qb()),2&e&&(l.ec("translucent",!0),l.Eb(6),l.qc(" /",null==t.file||null==t.file.fileSystemEntry?null:t.file.fileSystemEntry.dataSource.id,"",null==t.file||null==t.file.fileSystemEntry?null:t.file.fileSystemEntry.path," "),l.Eb(1),l.ec("fullscreen",!0))},directives:[o.i,o.E,o.e,o.b,o.c,o.D,o.q,o.f,o.t,o.u],styles:[""]}),E),V=r("Yn41"),M=[{path:"",children:[{path:"**",component:P,runGuardsAndResolvers:"always",resolve:{fileSystemFacade:V.a,file:(O=function(){function t(n,i){e(this,t),this.toastService=n,this.fileSystemFacadeResolverService=i}return n(t,[{key:"resolve",value:function(e,t){var n=this,i=e.url.map((function(e){return e.path})).join("/"),r=i.endsWith("-details")?i.substr(0,i.length-"-details".length):i,o={};return this.fileSystemFacadeResolverService.resolve(e,t).pipe(Object(m.a)((function(e){return n.resolveForUrlAndParamMap(e,r,o)})),this.toastService.catchErrorAndShowToast())}},{key:"resolveForUrlAndParamMap",value:function(e,t,n){return e.resolveFile(t)}}]),t}(),O.\u0275fac=function(e){return new(e||O)(l.Vb(g.a),l.Vb(V.a))},O.\u0275prov=l.Kb({token:O,factory:O.\u0275fac,providedIn:"root"}),O)}}]}],Q=((C=function t(){e(this,t)}).\u0275mod=l.Mb({type:C}),C.\u0275inj=l.Lb({factory:function(e){return new(e||C)},imports:[[c.i.forChild(M)],c.i]}),C),T=r("5M1D"),j=((I=function t(){e(this,t)}).\u0275mod=l.Mb({type:I}),I.\u0275inj=l.Lb({factory:function(e){return new(e||I)},providers:[y],imports:[[o.F,a.b,s.a,Q,d.a,T.a]]}),I)}}])}();